<section class="bg-gray-50 min-h-screen flex items-center justify-center">
  <!-- Contenedor del registro -->
  <div
    class="bg-gray-100 flex flex-col md:flex-row rounded-2xl shadow-lg max-w-3xl p-5 max-h-[90vh] overflow-auto"
  >
    <!-- Aquí va el formulario de registro -->
    <div class="w-full px-8">
      <h2 class="font-bold text-2xl text-slate-800 text-center">Registro</h2>
      <form
        id="formregister"
        (ngSubmit)="this.onSubmit()"
        class="flex flex-col gap-4"
        #formregister="ngForm"
      >
        <div class="grid grid-cols-2 gap-4">
          <div class="flex flex-col">
            <!-- Campo para el nombre -->
            <label class="mt-5 text-slate-800">Nombre</label>
            <input
              type="text"
              name="nombre"
              id="nombre"
              class="p-2 rounded-xl border w-full text-slate-800"
              placeholder="Nombre"
              required
              pattern="^[a-zA-Z]+$"
              [(ngModel)]="nombre"
              #nombreCntrl="ngModel"
              [ngClass]="{
                'border-red-500 bg-red-50': nombreCntrl.invalid && nombreCntrl.touched,
                'border-gray-300': !nombreCntrl.touched,
                'border-green-500 bg-green-50': nombreCntrl.valid && nombreCntrl.touched
              }"
            />
            <label
              *ngIf="nombreCntrl.errors?.['required'] && nombreCntrl.touched"
              for="nombre"
              class="text-red-500 text-sm"
              >Tiene que colocar su nombre.</label
            >
            <label
              *ngIf="nombreCntrl.errors?.['pattern'] && nombreCntrl.touched"
              for="nombre"
              class="text-red-500 text-sm"
              >Su nombre no puede tener números.</label
            >
          </div>
          <div class="flex flex-col">
            <!-- Campo para el apellido -->
            <label class="mt-5 text-slate-800">Apellido</label>
            <input
              type="text"
              name="apellido"
              id="apellido"
              pattern="^[a-zA-Z]+$"
              class="p-2 rounded-xl border w-full text-slate-800"
              placeholder="Apellido"
              required
              [(ngModel)]="apellido"
              #apellidoCntrl="ngModel"
              [ngClass]="{
                'border-red-500 bg-red-50': apellidoCntrl.invalid && apellidoCntrl.touched,
                'border-gray-300': !apellidoCntrl.touched,
                'border-green-500 bg-green-50': apellidoCntrl.valid && apellidoCntrl.touched
              }"
            />
            <label
              *ngIf="apellidoCntrl.errors?.['required'] && apellidoCntrl.touched"
              for="apellido"
              class="text-red-500 text-sm"
              >Tiene que colocar su apellido.</label
            >
            <label
              *ngIf="nombreCntrl.errors?.['pattern'] && nombreCntrl.touched"
              for="nombre"
              class="text-red-500 text-sm"
              >Su apellido no puede tener números.</label
            >
          </div>
        </div>

        <!-- Campo para el email -->
        <label class="mt-5 text-slate-800">Email</label>
        <input
          type="text"
          name="email"
          id="email"
          class="p-2 rounded-xl border w-full text-slate-800"
          placeholder="francisco.lima@example.com"
          email
          required
          [(ngModel)]="email"
          #emailCntrl="ngModel"
          [ngClass]="{
            'border-red-500 bg-red-50': emailCntrl.invalid && emailCntrl.touched,
            'border-gray-300': !emailCntrl.touched,
            'border-green-500 bg-green-50': emailCntrl.valid && emailCntrl.touched
          }"
        />
        <label
          *ngIf="emailCntrl.errors?.['required'] && emailCntrl.touched"
          for="email"
          class="text-red-500 text-sm"
          >Tiene que colocar el email.</label
        >
        <label
          *ngIf="emailCntrl.errors?.['email']"
          for="email"
          class="text-red-500 text-sm"
          >Tiene que colocar un email válido.</label
        >

        <!-- Campo para el teléfono -->
        <label class="mt-5 text-slate-800">Teléfono</label>
        <input
          type="text"
          name="telefono"
          id="telefono"
          class="p-2 rounded-xl border w-full text-slate-800"
          placeholder="099471882"
          required
          pattern="^\d+$"
          [(ngModel)]="telefono"
          #telefonoCntrl="ngModel"
          [ngClass]="{
            'border-red-500 bg-red-50': telefonoCntrl.invalid && telefonoCntrl.touched,
            'border-gray-300': !telefonoCntrl.touched,
            'border-green-500 bg-green-50': telefonoCntrl.valid && telefonoCntrl.touched
          }"
        />
        <label
          *ngIf="telefonoCntrl.errors?.['required'] && telefonoCntrl.touched"
          for="telefono"
          class="text-red-500 text-sm"
          >Tiene que colocar su teléfono.</label
        >
        <label
          *ngIf="telefonoCntrl.errors?.['pattern'] && telefonoCntrl.touched"
          for="telefono"
          class="text-red-500 text-sm"
          >Su teléfono solo puede tener números.</label
        >

        <!-- Campo para la calle -->
        <label class="mt-5 text-slate-800">Calle</label>
        <input
          type="text"
          name="calle"
          id="calle"
          class="p-2 rounded-xl border w-full text-slate-800"
          placeholder="Calle"
          required
          [(ngModel)]="calle"
          #calleCntrl="ngModel"
          [ngClass]="{
            'border-red-500 bg-red-50': calleCntrl.invalid && calleCntrl.touched,
            'border-gray-300': !calleCntrl.touched,
            'border-green-500 bg-green-50': calleCntrl.valid && calleCntrl.touched
          }"
        />
        <label
          *ngIf="calleCntrl.errors?.['required'] && calleCntrl.touched"
          for="calle"
          class="text-red-500 text-sm"
          >Tiene que colocar su calle.</label
        >

        <!-- Campo para el número -->
        <label class="mt-5 text-slate-800">Número</label>
        <input
          type="text"
          name="numero"
          id="numero"
          class="p-2 rounded-xl border w-full text-slate-800"
          placeholder="123"

          pattern="^\d+$"
          required
          maxlength="10"
          [(ngModel)]="numero"
          #numeroCntrl="ngModel"
          [ngClass]="{
            'border-red-500 bg-red-50': numeroCntrl.invalid && numeroCntrl.touched,
            'border-gray-300': !numeroCntrl.touched,
            'border-green-500 bg-green-50': numeroCntrl.valid && numeroCntrl.touched
          }"
        />
        <label
          *ngIf="numeroCntrl.errors?.['required'] && numeroCntrl.touched"
          for="numero"
          class="text-red-500 text-sm"
          >Tiene que colocar su número.</label
        >
        <!-- Campo para el apartamento -->
        <label class="mt-5 text-slate-800">Apto</label>
        <input
          type="text"
          name="apto"
          id="apto"
          class="p-2 rounded-xl border w-full text-slate-800"
          placeholder="A11"
          maxlength="5"
          [(ngModel)]="apto"
          #aptoCntrl="ngModel"
          [ngClass]="{
            'border-red-500 bg-red-50': aptoCntrl.invalid && aptoCntrl.touched,
            'border-gray-300': !aptoCntrl.touched,
            'border-blue-500 bg-blue-50': aptoCntrl.valid && aptoCntrl.touched
          }"
        />
        <label
          *ngIf="aptoCntrl.errors?.['maxlength'] && aptoCntrl.touched"
          class="text-red-500 text-sm"
          >Máximo de 5 caracteres.</label
        >

        <!-- Campo para la contraseña -->
        <label class="mt-5 text-slate-800">Contraseña</label>
        <input
          type="password"
          name="contraseña"
          id="contraseña"
          placeholder="Contraseña123!"
          class="p-2 rounded-xl border w-full text-slate-800"
          minlength="8"
          maxlength="20"
          required
          pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_]).{8,20}$"
          (input)="checkInput()"
          [(ngModel)]="password"
          #passControl="ngModel"
          [ngClass]="{
            'border-red-500 bg-red-50' : passControl.invalid && passControl.touched,
            'border-gray-300' : !passControl.touched,
            'border-green-500 bg-green-50' : passControl.valid && passControl.touched
          }"
        />
        <label
          *ngIf="passControl.errors?.['required'] && passControl.touched"
          class="text-red-500 text-sm"
          >Necesita ingresar su contraseña.</label
        >
        <label
          *ngIf="passControl.errors?.['minlength'] && passControl.touched"
          class="text-red-500 text-sm"
          >Su contraseña debe ser más larga.</label
        >
        <label
          *ngIf="passControl.errors?.['maxlength'] && passControl.touched"
          class="text-red-500 text-sm"
          >Su contraseña debe ser más corta.</label
        >
        <label
          *ngIf="passControl.errors?.['pattern'] && passControl.touched"
          class="text-red-500 text-sm inline-block w-auto"
          >Su contraseña debe contener una minúscula y mayúscula, un número y
          carácter especial.</label
        >

        <!-- Campo para confirmar la contraseña -->
        <label class="mt-5 text-slate-800">Confirmar Contraseña</label>
        <input
          type="password"
          name="confirmarContrasena"
          id="confirmarContrasena"
          placeholder="Contraseña123!"
          class="p-2 rounded-xl border w-full text-slate-800"
          minlength="8"
          maxlength="20"
          pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_]).{8,20}$"
          (input)="checkInput()"
          required
          [(ngModel)]="confirmarContrasena"
          #confirmarPassControl="ngModel"
          [ngClass]="{
            'border-red-500 bg-red-50' : confirmarPassControl.touched && (!confirmarPassControl.valid || !this.contraigual),
            'border-gray-300' : !confirmarPassControl.touched,
            'border-green-500 bg-green-50' : confirmarPassControl.valid && confirmarPassControl.touched && this.contraigual,
          }"
        />
        <label
          *ngIf="confirmarPassControl.errors?.['required'] && confirmarPassControl.touched"
          class="text-red-500 text-sm"
          >Necesita confirmar su contraseña.</label
        >
        <label
          *ngIf="confirmarPassControl.errors?.['minlength'] && confirmarPassControl.touched"
          class="text-red-500 text-sm"
          >Su contraseña debe ser más larga.</label
        >
        <label
          *ngIf="confirmarPassControl.errors?.['maxlength'] && confirmarPassControl.touched"
          class="text-red-500 text-sm"
          >Su contraseña debe ser más corta.</label
        >
        <label
          *ngIf="contraigual==false && confirmarPassControl.touched"
          class="text-red-500 text-sm"
          >Su contraseña debe ser igual.</label
        >
        <!-- Botón para la cámara -->
        <button
          type="button"
          class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mt-4"
          (click)="tomarFoto()"
        >
          Agregar Foto
        </button>

        <!-- Image Cropper -->
        <div *ngIf="mostrarCropper" class="mt-4">
          <image-cropper
            [imageBase64]="imageChangedEvent"
            [maintainAspectRatio]="true"
            [aspectRatio]="1 / 1"
            [resizeToWidth]="128"
            format="png"
            (imageCropped)="imageCropped($event)"
            (cropperReady)="onCropperReady()"
            (loadImageFailed)="onLoadImageFailed($event)"
          >
          </image-cropper>
          <button
            type="button"
            (click)="cropImage()"
            class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mt-4"
          >
            Recortar Imagen
          </button>
        </div>

        <!-- Mostrar la foto recortada -->
        <img
          *ngIf="foto"
          [src]="foto"
          alt="Foto del Usuario"
          class="mt-4 rounded"
        />

        <!-- Botón de envío -->
        <button
          type="submit"
          [disabled]="formregister.invalid"
          id="boton"
          class="bg-slate-800 rounded-xl text-white py-2 hover:scale-110 duration-300"
        >
          Registrarse
        </button>
      </form>

      <hr class="border-gray-300 mt-4" />
      <div class="text-sm flex justify-between items-center mt-3">
        <p class="text-gray-500">¿Ya tienes una cuenta?</p>
        <button
          class="py-2 px-5 text-slate-800 bg-white rounded-xl hover:scale-110 duration-300"
          (click)="redirectToLogin()"
        >
          Iniciar Sesión
        </button>
      </div>
    </div>
  </div>
</section>
